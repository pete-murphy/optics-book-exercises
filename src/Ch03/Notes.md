### Optic Anatomy

```haskell
--   ┌ Action       ┌ Structure
--  ┌┴─┐           ┌┴────────┐
>>> view (_1 . _2) ((1, 2), 3)
--       └┬──────┘     └┬┘
--        └ Path        └ Focus
```

### Lens Actions

Ex 5: Write out the (simplified) types of each identifier in the following statement.

```haskell
>>> over _2 (*10) (False, 2)
```

```haskell
over :: (Lens (Bool, Int)) -> (Int -> Int) -> (Bool, Int)
_2 :: Lens (Boo, Int)
```

### Lenses and Records

For instance, you can imagine that `view` just extracts the _getter_ function from a lens:

```haskell
view :: Lens' s a -> (s -> a)
```

Field lenses generated by `makeLenses` _usually_ have the type `Lens' recordType fieldType`.

#### Exercises - Records Part Two

1. List the lenses which would be generated by the following `makeLenses` call, including their types.

```haskell
data Inventory =
  Inventory
    { _wand :: Wand
    , _book :: Book
    , _potions :: [Potion]
    }

makeLenses ''Inventory
```

```haskell
wand :: Lens' Inventory Wand
book :: Lens' Inventory Book
potions :: Lens' Inventory [Potion]
```

2.

```haskell
gazork :: Lens' Chumble Spuzz
```

### Is it a Lens?

1. Yes
2. No
3. No
4. No
5. Yes

```haskell
conditional :: Lens' (Bool, a, a) a
conditional = lens get set
  where
    get :: (Bool, a, a) -> a
    get (True, x, _) = x
    get (False, _, x) = x

    set :: (Bool, a, a) -> a -> (Bool, a, a)
    set (True, _, y) x = (True, x, y)
    set (False, x, _) y = (False, x, y)
```

6. No

### Lens Laws

> These laws are mostly _guidelines_.

1. You get back what you set (set-get)
2. Setting back what you got doesn't do anything (get-set)
3. Setting is idempotent (set-set)

#### Exercises - Laws

1. Implement a lens which breaks the second and/or third law. That’s get-set and set-set respectively.

```haskell
-- | violates get-set
unlawful1 :: lens' (a, a) a
unlawful1 = lens g s
  where
    g :: (a, a) -> a
    g (x, _) = x
    s :: (a, a) -> a -> (a, a)
    s (x, _) a = (x, a)
```

```haskell
-- | Violates set-set (idempotence)
unlawful2
  :: forall a m
   . Semigroup m
  => Lens' (a, m) m
unlawful2 = lens g s
  where
    g :: (a, m) -> m
    g = snd
    s :: (a, m) -> m -> (a, m)
    s (x, m) m' = (x, m <> m')
```

2. Test the get-set and set-set laws for the msg lens we wrote this chapter. Does it pass these laws?
3. There’s a different way we could have written the msg lens such that it would PASS the set-get law and the set-set law, but fail get-set. Implement this other version.
4. Think up a new lens which is still useful even though it breaks a law or two.
5. BONUS (this one is tricky): Live a little; write a lens which violates ALL THREE LAWS
6. BONUS (another tricky one): Can you write a lawful lens for the following type:
